{"ast":null,"code":"const BASE_URL='/api';// Garder √ßa\nconst fetchWithConfig=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};// Ajout de logs pour debug\nconsole.log(`üîç Appel API vers: ${BASE_URL}${endpoint}`);const defaultHeaders={'Content-Type':'application/json','Accept':'application/json'// Ajout important\n};const config={...options,headers:{...defaultHeaders,...options.headers}};try{console.log(`üì§ Envoi requ√™te vers: ${BASE_URL}${endpoint}`);const response=await fetch(`${BASE_URL}${endpoint}`,config);console.log(`üì• R√©ponse re√ßue:`,response.status);return handleResponse(response);}catch(error){console.error(`‚ùå Erreur API (${endpoint}):`,error);throw error;}};const api={getProducts:async()=>{console.log('üì¶ R√©cup√©ration des produits...');try{// Modification du chemin\nconst data=await fetchWithConfig('/products',{method:'GET'// Explicite la m√©thode\n});console.log('‚úÖ Produits re√ßus:',data);return data;}catch(error){console.error('‚ùå Erreur products:',error);throw error;}},getProductById:productId=>fetchWithConfig(`products/${productId}`),// Panier\ngetCart:function(){let userId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'123456';return fetchWithConfig(`/cart/user/${userId}`);},addToCart:function(productId,quantity){let userId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'123456';return fetchWithConfig('/cart',{method:'POST',body:JSON.stringify({productId,quantity,userId})});},removeFromCart:itemId=>fetchWithConfig(`/cart/${itemId}`,{method:'DELETE'}),// Fonction utilitaire pour v√©rifier la connexion √† l'API\ncheckConnection:async()=>{try{console.log('Tentative de connexion √† l\\'API...');const response=await fetch(`${BASE_URL}/products`);console.log('Status:',response.status);const data=await response.json();console.log('Donn√©es re√ßues:',data);return response.ok;}catch(error){console.error('Erreur de connexion:',error);return false;}}};export default api;","map":{"version":3,"names":["BASE_URL","fetchWithConfig","endpoint","options","arguments","length","undefined","console","log","defaultHeaders","config","headers","response","fetch","status","handleResponse","error","api","getProducts","data","method","getProductById","productId","getCart","userId","addToCart","quantity","body","JSON","stringify","removeFromCart","itemId","checkConnection","json","ok"],"sources":["C:/Users/matte/Desktop/Cours_B3/generative/projet 1/ecommerce-app/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = '/api'; // Garder √ßa\r\n\r\nconst fetchWithConfig = async (endpoint, options = {}) => {\r\n  // Ajout de logs pour debug\r\n  console.log(`üîç Appel API vers: ${BASE_URL}${endpoint}`);\r\n  \r\n  const defaultHeaders = {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json'  // Ajout important\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    console.log(`üì§ Envoi requ√™te vers: ${BASE_URL}${endpoint}`);\r\n    const response = await fetch(`${BASE_URL}${endpoint}`, config);\r\n    console.log(`üì• R√©ponse re√ßue:`, response.status);\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    console.error(`‚ùå Erreur API (${endpoint}):`, error);\r\n    throw error;\r\n  }\r\n};\r\nconst api = {\r\n  getProducts: async () => {\r\n    console.log('üì¶ R√©cup√©ration des produits...');\r\n    try {\r\n      // Modification du chemin\r\n      const data = await fetchWithConfig('/products', {\r\n        method: 'GET',  // Explicite la m√©thode\r\n      });\r\n      console.log('‚úÖ Produits re√ßus:', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur products:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  getProductById: (productId) => \r\n    fetchWithConfig(`products/${productId}`),\r\n\r\n  // Panier\r\n  getCart: (userId = '123456') => \r\n    fetchWithConfig(`/cart/user/${userId}`),\r\n\r\n  addToCart: (productId, quantity, userId = '123456') => \r\n    fetchWithConfig('/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ productId, quantity, userId })\r\n    }),\r\n\r\n  removeFromCart: (itemId) => \r\n    fetchWithConfig(`/cart/${itemId}`, {\r\n      method: 'DELETE'\r\n    }),\r\n\r\n  // Fonction utilitaire pour v√©rifier la connexion √† l'API\r\n  checkConnection: async () => {\r\n    try {\r\n      console.log('Tentative de connexion √† l\\'API...');\r\n      const response = await fetch(`${BASE_URL}/products`);\r\n      console.log('Status:', response.status);\r\n      const data = await response.json();\r\n      console.log('Donn√©es re√ßues:', data);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Erreur de connexion:', error);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}