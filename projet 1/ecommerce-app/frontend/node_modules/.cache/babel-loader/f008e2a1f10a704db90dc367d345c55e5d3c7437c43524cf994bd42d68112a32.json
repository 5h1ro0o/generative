{"ast":null,"code":"const BASE_URL = '/api'; // Garder √ßa\n\nconst fetchWithConfig = async (endpoint, options = {}) => {\n  // Ajout de logs pour debug\n  console.log(`üîç Appel API vers: ${BASE_URL}${endpoint}`);\n  const defaultHeaders = {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json' // Ajout important\n  };\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers\n    }\n  };\n  try {\n    console.log(`üì§ Envoi requ√™te vers: ${BASE_URL}${endpoint}`);\n    const response = await fetch(`${BASE_URL}${endpoint}`, config);\n    console.log(`üì• R√©ponse re√ßue:`, response.status);\n    return handleResponse(response);\n  } catch (error) {\n    console.error(`‚ùå Erreur API (${endpoint}):`, error);\n    throw error;\n  }\n};\nconst api = {\n  getProducts: async () => {\n    console.log('üì¶ R√©cup√©ration des produits...');\n    try {\n      // Modification du chemin\n      const data = await fetchWithConfig('/products', {\n        method: 'GET' // Explicite la m√©thode\n      });\n      console.log('‚úÖ Produits re√ßus:', data);\n      return data;\n    } catch (error) {\n      console.error('‚ùå Erreur products:', error);\n      throw error;\n    }\n  },\n  getProductById: productId => fetchWithConfig(`products/${productId}`),\n  // Panier\n  getCart: (userId = '123456') => fetchWithConfig(`/cart/user/${userId}`),\n  addToCart: (productId, quantity, userId = '123456') => fetchWithConfig('/cart', {\n    method: 'POST',\n    body: JSON.stringify({\n      productId,\n      quantity,\n      userId\n    })\n  }),\n  removeFromCart: itemId => fetchWithConfig(`/cart/${itemId}`, {\n    method: 'DELETE'\n  }),\n  // Fonction utilitaire pour v√©rifier la connexion √† l'API\n  checkConnection: async () => {\n    try {\n      console.log('Tentative de connexion √† l\\'API...');\n      const response = await fetch(`${BASE_URL}/products`);\n      console.log('Status:', response.status);\n      const data = await response.json();\n      console.log('Donn√©es re√ßues:', data);\n      return response.ok;\n    } catch (error) {\n      console.error('Erreur de connexion:', error);\n      return false;\n    }\n  }\n};\nexport default api;","map":{"version":3,"names":["BASE_URL","fetchWithConfig","endpoint","options","console","log","defaultHeaders","config","headers","response","fetch","status","handleResponse","error","api","getProducts","data","method","getProductById","productId","getCart","userId","addToCart","quantity","body","JSON","stringify","removeFromCart","itemId","checkConnection","json","ok"],"sources":["C:/Users/matte/Desktop/Cours_B3/generative/projet 1/ecommerce-app/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = '/api'; // Garder √ßa\r\n\r\nconst fetchWithConfig = async (endpoint, options = {}) => {\r\n  // Ajout de logs pour debug\r\n  console.log(`üîç Appel API vers: ${BASE_URL}${endpoint}`);\r\n  \r\n  const defaultHeaders = {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json'  // Ajout important\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    console.log(`üì§ Envoi requ√™te vers: ${BASE_URL}${endpoint}`);\r\n    const response = await fetch(`${BASE_URL}${endpoint}`, config);\r\n    console.log(`üì• R√©ponse re√ßue:`, response.status);\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    console.error(`‚ùå Erreur API (${endpoint}):`, error);\r\n    throw error;\r\n  }\r\n};\r\nconst api = {\r\n  getProducts: async () => {\r\n    console.log('üì¶ R√©cup√©ration des produits...');\r\n    try {\r\n      // Modification du chemin\r\n      const data = await fetchWithConfig('/products', {\r\n        method: 'GET',  // Explicite la m√©thode\r\n      });\r\n      console.log('‚úÖ Produits re√ßus:', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur products:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  getProductById: (productId) => \r\n    fetchWithConfig(`products/${productId}`),\r\n\r\n  // Panier\r\n  getCart: (userId = '123456') => \r\n    fetchWithConfig(`/cart/user/${userId}`),\r\n\r\n  addToCart: (productId, quantity, userId = '123456') => \r\n    fetchWithConfig('/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ productId, quantity, userId })\r\n    }),\r\n\r\n  removeFromCart: (itemId) => \r\n    fetchWithConfig(`/cart/${itemId}`, {\r\n      method: 'DELETE'\r\n    }),\r\n\r\n  // Fonction utilitaire pour v√©rifier la connexion √† l'API\r\n  checkConnection: async () => {\r\n    try {\r\n      console.log('Tentative de connexion √† l\\'API...');\r\n      const response = await fetch(`${BASE_URL}/products`);\r\n      console.log('Status:', response.status);\r\n      const data = await response.json();\r\n      console.log('Donn√©es re√ßues:', data);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Erreur de connexion:', error);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}