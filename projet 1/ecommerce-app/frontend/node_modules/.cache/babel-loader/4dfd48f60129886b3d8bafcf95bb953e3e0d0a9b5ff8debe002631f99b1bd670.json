{"ast":null,"code":"// src/utils/api.js\nconst BASE_URL = '/api';\nconst handleResponse = async response => {\n  if (!response.ok) {\n    const error = await response.json().catch(() => ({}));\n    throw new Error(error.message || `Erreur HTTP ${response.status}`);\n  }\n  return response.json();\n};\nconst fetchWithConfig = async (endpoint, options = {}) => {\n  const token = localStorage.getItem('token');\n  const defaultHeaders = {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    ...(token && {\n      'Authorization': `Bearer ${token}`\n    })\n  };\n  const config = {\n    ...options,\n    headers: {\n      ...defaultHeaders,\n      ...options.headers\n    }\n  };\n  const fullUrl = endpoint.startsWith('/api') ? endpoint : `${BASE_URL}${endpoint.startsWith('/') ? endpoint : `/${endpoint}`}`;\n  console.log(`🔍 URL finale: ${fullUrl}`);\n  try {\n    console.log(`📤 Envoi requête vers: ${fullUrl}`);\n    const response = await fetch(fullUrl, config);\n    console.log(`📥 Réponse reçue: ${response.status}`);\n    return handleResponse(response);\n  } catch (error) {\n    console.error(`❌ Erreur API (${fullUrl}):`, error);\n    throw error;\n  }\n};\nconst api = {\n  login: async (email, password) => {\n    return fetchWithConfig('/auth/login', {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    });\n  },\n  register: async userData => {\n    return fetchWithConfig('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify(userData)\n    });\n  }\n  // ... autres fonctions\n};\nexport default api;","map":{"version":3,"names":["BASE_URL","handleResponse","response","ok","error","json","catch","Error","message","status","fetchWithConfig","endpoint","options","token","localStorage","getItem","defaultHeaders","config","headers","fullUrl","startsWith","console","log","fetch","api","login","email","password","method","body","JSON","stringify","register","userData"],"sources":["C:/Users/matte/Desktop/Cours_B3/generative/projet 1/ecommerce-app/frontend/src/utils/api.js"],"sourcesContent":["// src/utils/api.js\r\nconst BASE_URL = '/api';\r\n\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || `Erreur HTTP ${response.status}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\nconst fetchWithConfig = async (endpoint, options = {}) => {\r\n  const token = localStorage.getItem('token');\r\n  const defaultHeaders = {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json',\r\n    ...(token && { 'Authorization': `Bearer ${token}` })\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  const fullUrl = endpoint.startsWith('/api') \r\n    ? endpoint \r\n    : `${BASE_URL}${endpoint.startsWith('/') ? endpoint : `/${endpoint}`}`;\r\n  \r\n  console.log(`🔍 URL finale: ${fullUrl}`);\r\n  \r\n  try {\r\n    console.log(`📤 Envoi requête vers: ${fullUrl}`);\r\n    const response = await fetch(fullUrl, config);\r\n    console.log(`📥 Réponse reçue: ${response.status}`);\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    console.error(`❌ Erreur API (${fullUrl}):`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst api = {\r\n  login: async (email, password) => {\r\n    return fetchWithConfig('/auth/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ email, password })\r\n    });\r\n  },\r\n  register: async (userData) => {\r\n    return fetchWithConfig('/auth/register', {\r\n      method: 'POST',\r\n      body: JSON.stringify(userData)\r\n    });\r\n  },\r\n  // ... autres fonctions\r\n};\r\n\r\nexport default api;"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAG,MAAM;AAEvB,MAAMC,cAAc,GAAG,MAAOC,QAAQ,IAAK;EACzC,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;IAChB,MAAMC,KAAK,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACrD,MAAM,IAAIC,KAAK,CAACH,KAAK,CAACI,OAAO,IAAI,eAAeN,QAAQ,CAACO,MAAM,EAAE,CAAC;EACpE;EACA,OAAOP,QAAQ,CAACG,IAAI,CAAC,CAAC;AACxB,CAAC;AAED,MAAMK,eAAe,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACxD,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,MAAMC,cAAc,GAAG;IACrB,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE,kBAAkB;IAC5B,IAAIH,KAAK,IAAI;MAAE,eAAe,EAAE,UAAUA,KAAK;IAAG,CAAC;EACrD,CAAC;EAED,MAAMI,MAAM,GAAG;IACb,GAAGL,OAAO;IACVM,OAAO,EAAE;MACP,GAAGF,cAAc;MACjB,GAAGJ,OAAO,CAACM;IACb;EACF,CAAC;EAED,MAAMC,OAAO,GAAGR,QAAQ,CAACS,UAAU,CAAC,MAAM,CAAC,GACvCT,QAAQ,GACR,GAAGX,QAAQ,GAAGW,QAAQ,CAACS,UAAU,CAAC,GAAG,CAAC,GAAGT,QAAQ,GAAG,IAAIA,QAAQ,EAAE,EAAE;EAExEU,OAAO,CAACC,GAAG,CAAC,kBAAkBH,OAAO,EAAE,CAAC;EAExC,IAAI;IACFE,OAAO,CAACC,GAAG,CAAC,0BAA0BH,OAAO,EAAE,CAAC;IAChD,MAAMjB,QAAQ,GAAG,MAAMqB,KAAK,CAACJ,OAAO,EAAEF,MAAM,CAAC;IAC7CI,OAAO,CAACC,GAAG,CAAC,qBAAqBpB,QAAQ,CAACO,MAAM,EAAE,CAAC;IACnD,OAAOR,cAAc,CAACC,QAAQ,CAAC;EACjC,CAAC,CAAC,OAAOE,KAAK,EAAE;IACdiB,OAAO,CAACjB,KAAK,CAAC,iBAAiBe,OAAO,IAAI,EAAEf,KAAK,CAAC;IAClD,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAMoB,GAAG,GAAG;EACVC,KAAK,EAAE,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;IAChC,OAAOjB,eAAe,CAAC,aAAa,EAAE;MACpCkB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEL,KAAK;QAAEC;MAAS,CAAC;IAC1C,CAAC,CAAC;EACJ,CAAC;EACDK,QAAQ,EAAE,MAAOC,QAAQ,IAAK;IAC5B,OAAOvB,eAAe,CAAC,gBAAgB,EAAE;MACvCkB,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACE,QAAQ;IAC/B,CAAC,CAAC;EACJ;EACA;AACF,CAAC;AAED,eAAeT,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}