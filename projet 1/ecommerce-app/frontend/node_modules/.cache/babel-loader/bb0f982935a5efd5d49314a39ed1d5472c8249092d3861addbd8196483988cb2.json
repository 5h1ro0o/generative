{"ast":null,"code":"const BASE_URL='/api';// Fonction utilitaire pour gérer les réponses\nconst handleResponse=async response=>{if(!response.ok){// On récupère le message d'erreur du serveur si disponible\ntry{const errorData=await response.json();throw new Error(errorData.message||`Erreur HTTP: ${response.status}`);}catch(e){throw new Error(`Erreur HTTP: ${response.status}`);}}return response.json();};// Fonction utilitaire pour les requêtes fetch\nconst fetchWithConfig=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const defaultHeaders={'Content-Type':'application/json'// Ajoutez ici d'autres headers par défaut si nécessaire\n};const config={...options,headers:{...defaultHeaders,...options.headers}};try{const response=await fetch(`${BASE_URL}${endpoint}`,config);return handleResponse(response);}catch(error){console.error(`Erreur API (${endpoint}):`,error);throw new Error(error.message||'Erreur de connexion au serveur');}};const api={// Produits\ngetProducts:()=>fetchWithConfig('/products'),getProductById:productId=>fetchWithConfig(`/products/${productId}`),// Panier\ngetCart:function(){let userId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'123456';return fetchWithConfig(`/cart/user/${userId}`);},addToCart:function(productId,quantity){let userId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'123456';return fetchWithConfig('/cart',{method:'POST',body:JSON.stringify({productId,quantity,userId})});},removeFromCart:itemId=>fetchWithConfig(`/cart/${itemId}`,{method:'DELETE'}),// Fonction utilitaire pour vérifier la connexion à l'API\ncheckConnection:async()=>{try{const response=await fetch(`${BASE_URL}/health`);return response.ok;}catch(error){console.error('Erreur de connexion à l\\'API:',error);return false;}}};export default api;","map":{"version":3,"names":["BASE_URL","handleResponse","response","ok","errorData","json","Error","message","status","e","fetchWithConfig","endpoint","options","arguments","length","undefined","defaultHeaders","config","headers","fetch","error","console","api","getProducts","getProductById","productId","getCart","userId","addToCart","quantity","method","body","JSON","stringify","removeFromCart","itemId","checkConnection"],"sources":["C:/Users/matte/Desktop/Cours_B3/generative/projet 1/ecommerce-app/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = '/api';\r\n\r\n// Fonction utilitaire pour gérer les réponses\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    // On récupère le message d'erreur du serveur si disponible\r\n    try {\r\n      const errorData = await response.json();\r\n      throw new Error(errorData.message || `Erreur HTTP: ${response.status}`);\r\n    } catch (e) {\r\n      throw new Error(`Erreur HTTP: ${response.status}`);\r\n    }\r\n  }\r\n  return response.json();\r\n};\r\n\r\n// Fonction utilitaire pour les requêtes fetch\r\nconst fetchWithConfig = async (endpoint, options = {}) => {\r\n  const defaultHeaders = {\r\n    'Content-Type': 'application/json',\r\n    // Ajoutez ici d'autres headers par défaut si nécessaire\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    const response = await fetch(`${BASE_URL}${endpoint}`, config);\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    console.error(`Erreur API (${endpoint}):`, error);\r\n    throw new Error(error.message || 'Erreur de connexion au serveur');\r\n  }\r\n};\r\n\r\nconst api = {\r\n  // Produits\r\n  getProducts: () => \r\n    fetchWithConfig('/products'),\r\n\r\n  getProductById: (productId) => \r\n    fetchWithConfig(`/products/${productId}`),\r\n\r\n  // Panier\r\n  getCart: (userId = '123456') => \r\n    fetchWithConfig(`/cart/user/${userId}`),\r\n\r\n  addToCart: (productId, quantity, userId = '123456') => \r\n    fetchWithConfig('/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ productId, quantity, userId })\r\n    }),\r\n\r\n  removeFromCart: (itemId) => \r\n    fetchWithConfig(`/cart/${itemId}`, {\r\n      method: 'DELETE'\r\n    }),\r\n\r\n  // Fonction utilitaire pour vérifier la connexion à l'API\r\n  checkConnection: async () => {\r\n    try {\r\n      const response = await fetch(`${BASE_URL}/health`);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('Erreur de connexion à l\\'API:', error);\r\n      return false;\r\n    }\r\n  }\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}