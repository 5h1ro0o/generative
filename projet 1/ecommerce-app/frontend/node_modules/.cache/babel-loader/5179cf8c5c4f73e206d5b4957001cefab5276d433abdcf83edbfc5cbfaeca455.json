{"ast":null,"code":"// Configuration de base\nconst BASE_URL='/api';// Fonction utilitaire pour g√©rer les r√©ponses\nconst handleResponse=async response=>{if(!response.ok){const error=await response.json().catch(()=>({}));throw new Error(error.message||`Erreur HTTP ${response.status}`);}return response.json();};// Configuration des requ√™tes\nconst fetchWithConfig=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const fullUrl=`${BASE_URL}${endpoint.startsWith('/')?endpoint:`/${endpoint}`}`;console.log(`üîç Appel API vers: ${fullUrl}`);const defaultHeaders={'Content-Type':'application/json','Accept':'application/json'};const config={...options,headers:{...defaultHeaders,...options.headers}};try{console.log(`üì§ Envoi requ√™te vers: ${fullUrl}`);const response=await fetch(fullUrl,config);console.log(`üì• R√©ponse re√ßue: ${response.status}`);return handleResponse(response);}catch(error){console.error(`‚ùå Erreur API (${fullUrl}):`,error);throw error;}};const api={// Produits\ngetProducts:async()=>{console.log('üì¶ R√©cup√©ration des produits...');try{const data=await fetchWithConfig('/products',{method:'GET'});console.log('‚úÖ Produits re√ßus:',data);return data;}catch(error){console.error('‚ùå Erreur products:',error);throw error;}},getProductById:productId=>fetchWithConfig(`/products/${productId}`),// Panier\ngetCart:function(){let userId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'123456';return fetchWithConfig(`/cart/user/${userId}`);},addToCart:function(productId,quantity){let userId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'123456';return fetchWithConfig('/cart',{method:'POST',body:JSON.stringify({productId,quantity,userId})});},removeFromCart:itemId=>fetchWithConfig(`/cart/${itemId}`,{method:'DELETE'}),// Test de connexion\ncheckConnection:async()=>{try{console.log('üîå Test de connexion API...');const response=await fetch(`${BASE_URL}/products`);console.log('üì° Status:',response.status);const data=await response.json();console.log('üì• Donn√©es re√ßues:',data);return response.ok;}catch(error){console.error('‚ùå Erreur de connexion:',error);return false;}}};export default api;","map":{"version":3,"names":["BASE_URL","handleResponse","response","ok","error","json","catch","Error","message","status","fetchWithConfig","endpoint","options","arguments","length","undefined","fullUrl","startsWith","console","log","defaultHeaders","config","headers","fetch","api","getProducts","data","method","getProductById","productId","getCart","userId","addToCart","quantity","body","JSON","stringify","removeFromCart","itemId","checkConnection"],"sources":["C:/Users/matte/Desktop/Cours_B3/generative/projet 1/ecommerce-app/frontend/src/utils/api.js"],"sourcesContent":["// Configuration de base\r\nconst BASE_URL = '/api';\r\n\r\n// Fonction utilitaire pour g√©rer les r√©ponses\r\nconst handleResponse = async (response) => {\r\n  if (!response.ok) {\r\n    const error = await response.json().catch(() => ({}));\r\n    throw new Error(error.message || `Erreur HTTP ${response.status}`);\r\n  }\r\n  return response.json();\r\n};\r\n\r\n// Configuration des requ√™tes\r\nconst fetchWithConfig = async (endpoint, options = {}) => {\r\n  const fullUrl = `${BASE_URL}${endpoint.startsWith('/') ? endpoint : `/${endpoint}`}`;\r\n  console.log(`üîç Appel API vers: ${fullUrl}`);\r\n  \r\n  const defaultHeaders = {\r\n    'Content-Type': 'application/json',\r\n    'Accept': 'application/json'\r\n  };\r\n\r\n  const config = {\r\n    ...options,\r\n    headers: {\r\n      ...defaultHeaders,\r\n      ...options.headers,\r\n    },\r\n  };\r\n\r\n  try {\r\n    console.log(`üì§ Envoi requ√™te vers: ${fullUrl}`);\r\n    const response = await fetch(fullUrl, config);\r\n    console.log(`üì• R√©ponse re√ßue: ${response.status}`);\r\n    return handleResponse(response);\r\n  } catch (error) {\r\n    console.error(`‚ùå Erreur API (${fullUrl}):`, error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst api = {\r\n  // Produits\r\n  getProducts: async () => {\r\n    console.log('üì¶ R√©cup√©ration des produits...');\r\n    try {\r\n      const data = await fetchWithConfig('/products', {\r\n        method: 'GET',\r\n      });\r\n      console.log('‚úÖ Produits re√ßus:', data);\r\n      return data;\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur products:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  getProductById: (productId) => \r\n    fetchWithConfig(`/products/${productId}`),\r\n\r\n  // Panier\r\n  getCart: (userId = '123456') => \r\n    fetchWithConfig(`/cart/user/${userId}`),\r\n\r\n  addToCart: (productId, quantity, userId = '123456') => \r\n    fetchWithConfig('/cart', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ productId, quantity, userId })\r\n    }),\r\n\r\n  removeFromCart: (itemId) => \r\n    fetchWithConfig(`/cart/${itemId}`, {\r\n      method: 'DELETE'\r\n    }),\r\n\r\n  // Test de connexion\r\n  checkConnection: async () => {\r\n    try {\r\n      console.log('üîå Test de connexion API...');\r\n      const response = await fetch(`${BASE_URL}/products`);\r\n      console.log('üì° Status:', response.status);\r\n      const data = await response.json();\r\n      console.log('üì• Donn√©es re√ßues:', data);\r\n      return response.ok;\r\n    } catch (error) {\r\n      console.error('‚ùå Erreur de connexion:', error);\r\n      return false;\r\n    }\r\n  },\r\n};\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}